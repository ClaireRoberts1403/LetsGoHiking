{% extends "base.html" %} {% load static %}

{% block extra_title %} Challenges {% endblock %}

{% block content %}
<!-- Challenges Header and quote -->
<div class="jumbotron jumbotron-fluid">
	<div class="container">
		<h1 class="display-4 heading-font">
			Challenges
		</h1>
		<h2 class="lead">
			"It's not the mountain we conquer, but ourselves." - Sir Edmund Hillary
		</h2>
	</div>
</div>
<!-- Challenge Card -->
{% for challenge in challenges %}
<div class="container-fluid challenge-card">
	<div class="row">
		<div class="col">
			<div class="card">
				<div class="row no-gutters">
					<div class="col-md-4">
						{% if challenge.challenge_image %}
						<img class="card-img" src="{{ challenge.challenge_image.url }}" alt="{{ challenge.name }}">
                            {% else %}
						<img class="card-img" src="{{ MEDIA_URL }}lost_image.png" alt="{{ challenge.name }}">
						{% endif %}
					</div>
					<div class="col-md-8">
						<div class="card-body">
							<h3 class="card-title header-title"><strong>{{ challenge.name }}</strong></h3>
							<p class="card-text">{{ challenge.challenge_description }}</p>
							<ul class="list-group list-group-horizontal">
								<li class="list-group-item">Distance: {{ challenge.challenge_distance }} KM</li>
								<li class="list-group-item">Ascent: {{ challenge.challenge_ascent }} M</li>
								<li class="list-group-item">Estimated time: {{ challenge.challenge_estimate_time }}
									Hours</li>
								<li class="list-group-item">Difficulty: {{ challenge.challenge_difficulty_rating }}</li>
							</ul>
							<ul class="list-group list-group-horizontal">
								<li class="list-group-item">Location: {{ challenge.challenge_location }}</li>
								<li class="list-group-item">Award: {{ challenge.challenge_award_name }}</li>
								<li class="list-group-item">
								{% if challenge.challenge_image %}
									<img class="card-img award_image" src="{{ challenge.challenge_award_image.url }}" alt="{{ challenge.name }}">
                                {% else %}
									<img class="card-img" src="{{ MEDIA_URL }}lost_image.png" alt="{{ challenge.name }}">
								{% endif %}
								</li>
                                <li class="list-group-item">Price: Â£ {{ challenge.challenge_price }}</li>
							</ul>
                            <!-- Add to cart functionality -->
							<br>
                            <form class="form" action="{% url 'add_to_bag' challenge.id %}" method="POST">
                                {% csrf_token %}
                                <div class="form-row">
                                    <div class="col-12">
                                        <div class="form-group">
                                            <div class="input-group">
                                                <p class="mt-3">
                                                <strong> Quantity:</strong>
                                                    <input class="form-control qty_input" type="number" name="quantity" 
                                                    value="1" min="1" max="99" data-item_id="{{ challenge.id }}" id="id_qty_{{ challenge.id }}"/></p>
                                                <div class="form-row ml-5"><input type="submit" class="btn my-btn-dark" value="Add to Cart"/></div>
                                            </div>
                                            <input type="hidden" name="redirect_url" value="{{ request.path }}">
                                        </div>
                                    </div>
                                </div>
                            </form>
						</div>
					</div>
				</div>
			</div>
			{% endfor %}
		</div>
	</div>
</div>



{% endblock %}